<article class='user'>
  <div class='row'>
    <div class='small-12 medium-6 large-4 columns'>

      <h1><%= @user.name %></h1>

      <table>
        <tbody>
          <tr>
            <td>Email:</td><td><%= @user.email %></td>
          </tr>
          <%
            user_routes = @user.routes
            user_routes = user_routes.collect(&:name) if user_routes.present?
            user_areas = @user.areas
            user_areas = user_areas.collect(&:name) if user_areas.present?
          %>
          <% if user_routes.present? %>
            <tr>
              <td><%= 'route'.pluralize(user_routes.count) %>:</td>
              <td><%= user_routes.to_sentence %></td>
            </tr>
          <% end %>
          <% if user_areas.present? %>
            <tr>
              <td><%= 'group'.pluralize(user_areas.count) %>:</td>
              <td><%= user_areas.to_sentence %></td>
            </tr>
          <% end %>
          <tr>
            <td> </td>
            <td>
              <% if current_user == @user %>
                <%= link_to 'edit my details', edit_user_registration_path %>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>


      <h3>Recently created issues</h3>
      <table>
        <thead>
          <tr>
            <td>No.</td>
            <td>Category</td>
            <td>Issue</td>
            <td>Location</td>
            <td>Status</td>
          </tr>
        </thead>
        <tbody>
          <% @user.issues.order(id: :desc).limit(10).each do |issue| %>
            <tr>
              <td><%= link_to issue.issue_number, issue_number_path(issue.issue_number) %></td>
              <td><%= issue.category.name if issue.category %></td>
              <td><%= issue.the_problem %></td>
              <td><%= issue.location_name %></td>
              <td><%= issue.state %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= link_to 'show all user issues', issues_path(user: @user.id) %>


    </div>
  </div>
</div>